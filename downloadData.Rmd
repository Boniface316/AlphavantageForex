---
title: "FX data dowload"
author: "Boniface Yogendran"
date: "November 10, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

###API
claim your free [API key](https://www.alphavantage.co/support/#api-key) before you start working on the code.

###Libraries to load
Note: AlphavantageForex is located [here](https://github.com/Boniface316/AlphavantageForex)
```{r library, warning=FALSE, message=FALSE}
library(glue)
library(httr)
library(data.table)
library(stringr)
library(readr)
library(AlphavantageForex)
library(xts)
```


###Setup your API
```{r}
apiKey <- "YOUR API KEY"
```


Lets see the currency data that are available in their system
```{r currencyList}
url <- "https://www.alphavantage.co/physical_currency_list/"

#The csv file contains two columns, our interest is column 1, which contains the currency symbols
currencyList <- as.character(read.csv(url)[,1])

print(paste0("Total number of currency data available:", length(currencyList)))
print(currencyList)
```


There are total of 156 currency data available in Alphavantage. 


```{r}
currencyCombo <- expand.grid(currencyList,currencyList)

currencyCombo <- currencyCombo[-c(which(currencyCombo$Var1 == currencyCombo$Var2)),]
currencyCombo <- as.vector(paste0(currencyCombo[,1], currencyCombo[,2]))
print(length(currencyCombo))
```


We can derive total of 24,180 currency pairs can be built using their data. In reality, we dont trade all the pairs. Some pairs are not liquid. Therefore we will only investigate 8 curreny pairs.


```{r}
masterData <- list()
successPair <- c()
failedPair <- c()

apiKey <- "DBOWQBYGPZKEFG8D"

symbols <- c("EURUSD", "USDJPY", "GBPUSD", "AUDUSD", "USDCHF", "USDCAD", "EURJPY", "EURGBP")
invisible(lapply(symbols, multipleFX_Pair))
```

###Explore the data
```{r}
#number successful download
length(successPair)
print(paste0("The following pairs were sucessfuly downloaded:"))
print(successPair)
```

###Start date of the data for each currency
```{r}
lapply(masterData, head, n = 1)
```

###End date of the data for each currency
```{r}
lapply(masterData, tail, n = 1)
```

##Conclusion
The data is sufficient enough to start building an algotrading system. 
